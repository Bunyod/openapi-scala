openapi: 3.0.0

info:
  title: 'enfore Marketplace Purchasing API'
  version: "0.0.2"
  description: |
    This is a first design version of the enfore Marketplace API

paths:

  '/purchase-order-status-update':
    post:
      summary: Submit a new status for a purchase order
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PurchaseOrderStatusUpdate'  
      responses:
        200:
          description: Updated status accepted
        400:
          description: Invalid request

components:
  schemas:

    PurchaseOrderStatusUpdate:
      description: |
        When the status of a Marketplace Purchase Order is changed,  use this endpoint to signal that change to the Organization
        on the enfore platform that has placed the purchase order.
      type: object
      properties:
        '@type':
          description: |
            Constant name of the enfore DataModel Type
          type: string
          enum: ['n4.marketplace.purchasing.external.orderstatus.edi.OrderStatusUpdateEDIFormat']
        n4PurchaseOrderNumber:
          description: |
            The Number of the Purchase Order within the enfore Organization
          type: string
        supplierPurchaseOrderId:
          description: |
            Tracking ID for this purchase order on the supplier side
          type: string
        supplierGroupId:
          description: |
            An opaque ID of the Supplier Group (e.g. ServiceBund)
          type: string
        subSupplierId:
          description: |
            An opaque ID of a specific supplier within the Supplier Group (e.g. WebshopFBR)
          type: string
        supplierCustomerId:
          description: |
            ID of the Customer at the supplier
          type: string
        status:
          # description: |
          #   The new status of the order
          $ref: '#/components/schemas/PurchaseOrderStatus'
        note:
          description: |
            A note from the supplier accompanying the status change
          type: string
      required:
        - '@type'
        - n4PurchaseOrderNumber
        - supplierGroupId
        - subSupplierId
        - supplierCustomerId
        - status

    PurchaseOrderStatus:
      type: object
      properties:
        '@type':
          description: |
            Constant name of the enfore DataModel Type
          type: string
          enum: ['n4.marketplace.purchasing.external.orderstatus.edi.OrderStatus']
        value:
          type: string
          enum: [
            'SUBMITTED',
            'RECEIVED',
            'SHIPPED',
            'SUBMISSION_FAILED'
          ]
      required:
        - '@type'
          
